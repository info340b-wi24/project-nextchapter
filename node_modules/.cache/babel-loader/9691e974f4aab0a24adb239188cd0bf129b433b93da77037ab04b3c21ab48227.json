{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation}from'react-router-dom';import{ref,get,getDatabase}from'firebase/database';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function QuizResults(){const location=useLocation();const[books,setBooks]=useState([]);const{selectedGenre,selectedCondition,selectedType}=location.state||{};useEffect(()=>{const fetchBooks=async()=>{try{const db=getDatabase();const booksRef=ref(db,'UserData');const snapshot=await get(booksRef);const data=snapshot.val();console.log(\"Data from database:\",data);console.log(\"Filtering with criteria:\",selectedGenre,selectedCondition,selectedType);if(data){const filteredBooks=Object.values(data).filter(book=>{const isGenreMatch=book.Genre.toLowerCase()===selectedGenre.toLowerCase();const isConditionMatch=book.Condition.toLowerCase()===selectedCondition.toLowerCase();const isCoverTypeMatch=book.CoverType.toLowerCase()===selectedType.toLowerCase();// Debug output for each book\nconsole.log(\"Checking book: \".concat(book.BookTitle));console.log(\"Genre match: \".concat(isGenreMatch,\", Condition match: \").concat(isConditionMatch,\", CoverType match: \").concat(isCoverTypeMatch));return isGenreMatch&&isConditionMatch&&isCoverTypeMatch;});console.log(\"Filtered books:\",filteredBooks);setBooks(filteredBooks);}else{setBooks([]);}}catch(error){console.error(error);setBooks([]);}};fetchBooks();},[selectedGenre,selectedCondition,selectedType]);return/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Our Recommendations for You\"}),books.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No matching books found, please fill out the quiz again!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"listed-recommendations\",children:books.map((book,index)=>/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(encodeURIComponent(book.BookTitle)),style:{textDecoration:'none',color:'inherit'},children:/*#__PURE__*/_jsx(\"div\",{className:\"resultscard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"recommend\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.Photo,alt:\"Cover of \".concat(book.BookTitle)}),/*#__PURE__*/_jsx(\"h6\",{className:\"book-title\",children:book.BookTitle})]})})},index))})]});}export default QuizResults;","map":{"version":3,"names":["React","useState","useEffect","useLocation","ref","get","getDatabase","Link","jsx","_jsx","jsxs","_jsxs","QuizResults","location","books","setBooks","selectedGenre","selectedCondition","selectedType","state","fetchBooks","db","booksRef","snapshot","data","val","console","log","filteredBooks","Object","values","filter","book","isGenreMatch","Genre","toLowerCase","isConditionMatch","Condition","isCoverTypeMatch","CoverType","concat","BookTitle","error","className","children","length","map","index","to","encodeURIComponent","style","textDecoration","color","src","Photo","alt"],"sources":["C:/repo/info340-repos/project-nextchapter/my-app/src/components/QuizResults.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { ref, get, getDatabase } from 'firebase/database';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction QuizResults() {\r\n  const location = useLocation();\r\n  const [books, setBooks] = useState([]);\r\n  const { selectedGenre, selectedCondition, selectedType } = location.state || {};\r\n\r\n  useEffect(() => {\r\n    const fetchBooks = async () => {\r\n      try {\r\n        const db = getDatabase();\r\n        const booksRef = ref(db, 'UserData');\r\n\r\n        const snapshot = await get(booksRef);\r\n        const data = snapshot.val();\r\n\r\n        console.log(\"Data from database:\", data);\r\n        console.log(\"Filtering with criteria:\", selectedGenre, selectedCondition, selectedType);\r\n\r\n        if (data) {\r\n          const filteredBooks = Object.values(data).filter(book => {\r\n            const isGenreMatch = book.Genre.toLowerCase() === selectedGenre.toLowerCase();\r\n            const isConditionMatch = book.Condition.toLowerCase() === selectedCondition.toLowerCase();\r\n            const isCoverTypeMatch = book.CoverType.toLowerCase() === selectedType.toLowerCase();\r\n\r\n            // Debug output for each book\r\n            console.log(`Checking book: ${book.BookTitle}`);\r\n            console.log(`Genre match: ${isGenreMatch}, Condition match: ${isConditionMatch}, CoverType match: ${isCoverTypeMatch}`);\r\n\r\n            return isGenreMatch && isConditionMatch && isCoverTypeMatch;\r\n          });\r\n\r\n          console.log(\"Filtered books:\", filteredBooks);\r\n          setBooks(filteredBooks);\r\n        } else {\r\n          setBooks([]);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n        setBooks([]);\r\n      }\r\n    };\r\n\r\n    fetchBooks();\r\n  }, [selectedGenre, selectedCondition, selectedType]);\r\n\r\n  return (\r\n    <div className=\"recommendations-container\">\r\n      <h3>Our Recommendations for You</h3>\r\n      {books.length === 0 ? (\r\n        <p>No matching books found, please fill out the quiz again!</p>\r\n        ) : (\r\n          <div className=\"listed-recommendations\">\r\n            {books.map((book, index) => (\r\n              <Link to={`/books/${encodeURIComponent(book.BookTitle)}`} key={index} style={{ textDecoration: 'none', color: 'inherit' }}>\r\n                <div className=\"resultscard\">\r\n                  <div className=\"recommend\">\r\n                    <img src={book.Photo} alt={`Cover of ${book.BookTitle}`} />\r\n                    <h6 className=\"book-title\">{book.BookTitle}</h6>\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n            }\r\nexport default QuizResults;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}