{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ref,onValue,getDatabase}from'firebase/database';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookShelf(){const[books,setBooks]=useState([]);useEffect(()=>{const db=getDatabase();const booksRef=ref(db,'UserData');const unsubscribe=onValue(booksRef,snapshot=>{const data=snapshot.val();if(data){const booksArray=Object.values(data).map(book=>({...book,imgSrc:book.Photo,altText:\"Cover of \".concat(book.BookTitle),createdAtNumeric:Number(book.createdAt)})).sort((a,b)=>b.createdAtNumeric-a.createdAtNumeric).slice(0,9);setBooks(booksArray);}else{setBooks([]);}},error=>{console.error(error);setBooks([]);});return()=>unsubscribe();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"myshelfcontainer\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"page-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Our Community Shelf\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Most recent stories uploaded by our readers!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bookshelf\",children:books.map((book,index)=>/*#__PURE__*/ // Correctly wrapping the div with the Link\n_jsx(Link,{to:\"/books/\".concat(encodeURIComponent(book.BookTitle)),children:/*#__PURE__*/_jsx(\"div\",{className:\"book\",children:/*#__PURE__*/_jsx(\"img\",{src:book.imgSrc,alt:book.altText||\"Book cover\"})})},index))})]});}export default BookShelf;","map":{"version":3,"names":["React","useState","useEffect","ref","onValue","getDatabase","Link","jsx","_jsx","jsxs","_jsxs","BookShelf","books","setBooks","db","booksRef","unsubscribe","snapshot","data","val","booksArray","Object","values","map","book","imgSrc","Photo","altText","concat","BookTitle","createdAtNumeric","Number","createdAt","sort","a","b","slice","error","console","className","children","index","to","encodeURIComponent","src","alt"],"sources":["C:/repo/info340-repos/project-nextchapter/my-app/src/components/BookShelf.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { ref, onValue, getDatabase } from 'firebase/database';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction BookShelf() {\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const db = getDatabase();\r\n    const booksRef = ref(db, 'UserData');\r\n  \r\n    const unsubscribe = onValue(booksRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const booksArray = Object.values(data).map(book => ({\r\n          ...book,\r\n          imgSrc: book.Photo,\r\n          altText: `Cover of ${book.BookTitle}`, \r\n          createdAtNumeric: Number(book.createdAt)\r\n        }))\r\n        .sort((a, b) => b.createdAtNumeric - a.createdAtNumeric)\r\n        .slice(0, 9);\r\n\r\n        setBooks(booksArray);\r\n      } else {\r\n        setBooks([]);\r\n      }\r\n    }, (error) => {\r\n      console.error(error);\r\n      setBooks([]);\r\n    });\r\n\r\n    \r\n    return () => unsubscribe();\r\n  }, []);\r\n  return (\r\n    <div className=\"myshelfcontainer\">\r\n      <header className=\"page-title\">\r\n        <h1>Our Community Shelf</h1>\r\n        <h2>Most recent stories uploaded by our readers!</h2>\r\n      </header>\r\n      <div className=\"bookshelf\">\r\n        {books.map((book, index) => (\r\n          // Correctly wrapping the div with the Link\r\n          <Link to={`/books/${encodeURIComponent(book.BookTitle)}`} key={index}>\r\n            <div className=\"book\">\r\n              <img src={book.imgSrc} alt={book.altText || \"Book cover\"} />\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n  }\r\nexport default BookShelf;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,GAAG,CAAEC,OAAO,CAAEC,WAAW,KAAQ,mBAAmB,CAC7D,OAASC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAGxC,QAAS,CAAAC,SAASA,CAAA,CAAG,CACnB,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAY,EAAE,CAAGT,WAAW,CAAC,CAAC,CACxB,KAAM,CAAAU,QAAQ,CAAGZ,GAAG,CAACW,EAAE,CAAE,UAAU,CAAC,CAEpC,KAAM,CAAAE,WAAW,CAAGZ,OAAO,CAACW,QAAQ,CAAGE,QAAQ,EAAK,CAClD,KAAM,CAAAC,IAAI,CAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC,CAC3B,GAAID,IAAI,CAAE,CACR,KAAM,CAAAE,UAAU,CAAGC,MAAM,CAACC,MAAM,CAACJ,IAAI,CAAC,CAACK,GAAG,CAACC,IAAI,GAAK,CAClD,GAAGA,IAAI,CACPC,MAAM,CAAED,IAAI,CAACE,KAAK,CAClBC,OAAO,aAAAC,MAAA,CAAcJ,IAAI,CAACK,SAAS,CAAE,CACrCC,gBAAgB,CAAEC,MAAM,CAACP,IAAI,CAACQ,SAAS,CACzC,CAAC,CAAC,CAAC,CACFC,IAAI,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKA,CAAC,CAACL,gBAAgB,CAAGI,CAAC,CAACJ,gBAAgB,CAAC,CACvDM,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC,CAEZvB,QAAQ,CAACO,UAAU,CAAC,CACtB,CAAC,IAAM,CACLP,QAAQ,CAAC,EAAE,CAAC,CACd,CACF,CAAC,CAAGwB,KAAK,EAAK,CACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC,CACpBxB,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,CAAC,CAGF,MAAO,IAAMG,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,EAAE,CAAC,CACN,mBACEN,KAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/B9B,KAAA,WAAQ6B,SAAS,CAAC,YAAY,CAAAC,QAAA,eAC5BhC,IAAA,OAAAgC,QAAA,CAAI,qBAAmB,CAAI,CAAC,cAC5BhC,IAAA,OAAAgC,QAAA,CAAI,8CAA4C,CAAI,CAAC,EAC/C,CAAC,cACThC,IAAA,QAAK+B,SAAS,CAAC,WAAW,CAAAC,QAAA,CACvB5B,KAAK,CAACW,GAAG,CAAC,CAACC,IAAI,CAAEiB,KAAK,iBACrB;AACAjC,IAAA,CAACF,IAAI,EAACoC,EAAE,WAAAd,MAAA,CAAYe,kBAAkB,CAACnB,IAAI,CAACK,SAAS,CAAC,CAAG,CAAAW,QAAA,cACvDhC,IAAA,QAAK+B,SAAS,CAAC,MAAM,CAAAC,QAAA,cACnBhC,IAAA,QAAKoC,GAAG,CAAEpB,IAAI,CAACC,MAAO,CAACoB,GAAG,CAAErB,IAAI,CAACG,OAAO,EAAI,YAAa,CAAE,CAAC,CACzD,CAAC,EAHuDc,KAIzD,CACP,CAAC,CACC,CAAC,EACH,CAAC,CAER,CACF,cAAe,CAAA9B,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}