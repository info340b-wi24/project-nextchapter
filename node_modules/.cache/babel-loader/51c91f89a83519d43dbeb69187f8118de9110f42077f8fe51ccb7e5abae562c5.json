{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,Link}from'react-router-dom';import{ref,onValue,getDatabase}from'firebase/database';import GenreTags from'./Tags.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BookList(){const location=useLocation();const[searchQuery,setSearchQuery]=useState('');const[selectedGenre,setSelectedGenre]=useState('All');const[books,setBooks]=useState([]);useEffect(()=>{const db=getDatabase();const booksRef=ref(db,'UserData');const unsubscribe=onValue(booksRef,snapshot=>{const data=snapshot.val();if(data){const booksArray=Object.values(data).map(book=>({...book,title:book.BookTitle,genre:book.Genre,imgSrc:book.Photo,decision:book.Decision,altText:\"Cover of \".concat(book.BookTitle)})).slice(0,30);setBooks(booksArray);}else{setBooks([]);}},error=>{console.error(error);setBooks([]);});/* we might get points off for the unsubscribe ? since its in the reutun but we will figure that out latersss*/return()=>unsubscribe();},[]);const handleSearchInputChange=event=>{setSearchQuery(event.target.value);};const handleGenreClick=genre=>{setSelectedGenre(genre);};const handleResetClick=()=>{setSelectedGenre('All');setSearchQuery('');};const filteredBooks=books.filter(book=>(selectedGenre==='All'||book.genre===selectedGenre)&&(book.title?book.title.toLowerCase().includes(searchQuery.toLowerCase()):false));const isHomePage=location.pathname==='/';if(!isHomePage){return null;}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by book name...\",value:searchQuery,onChange:handleSearchInputChange}),/*#__PURE__*/_jsx(\"button\",{children:\"Search\"})]})}),/*#__PURE__*/_jsx(GenreTags,{onGenreClick:handleGenreClick,onResetClick:handleResetClick}),/*#__PURE__*/_jsx(\"div\",{className:\"books-listed\",children:filteredBooks.map((book,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.title),className:\"book-link\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.imgSrc,alt:book.altText}),/*#__PURE__*/_jsx(\"h2\",{children:book.title}),/*#__PURE__*/_jsx(\"div\",{className:\"decision-tag \".concat(book.decision.toLowerCase()),children:book.decision}),selectedGenre&&/*#__PURE__*/_jsx(\"div\",{className:\"genre-box type-button-\".concat(book.genre.toLowerCase()),children:book.genre})]})})},index))}),/*#__PURE__*/_jsx(\"h2\",{children:\"Find your next read!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"create\",children:/*#__PURE__*/_jsx(Link,{to:\"/quizParent\",children:/*#__PURE__*/_jsx(\"button\",{children:\"Take A Quiz\"})})})]});}export default BookList;","map":{"version":3,"names":["React","useState","useEffect","useLocation","Link","ref","onValue","getDatabase","GenreTags","jsx","_jsx","jsxs","_jsxs","BookList","location","searchQuery","setSearchQuery","selectedGenre","setSelectedGenre","books","setBooks","db","booksRef","unsubscribe","snapshot","data","val","booksArray","Object","values","map","book","title","BookTitle","genre","Genre","imgSrc","Photo","decision","Decision","altText","concat","slice","error","console","handleSearchInputChange","event","target","value","handleGenreClick","handleResetClick","filteredBooks","filter","toLowerCase","includes","isHomePage","pathname","children","className","type","placeholder","onChange","onGenreClick","onResetClick","index","to","src","alt"],"sources":["C:/repo/info340-repos/project-nextchapter/my-app/src/components/BookCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, Link } from 'react-router-dom';\r\nimport { ref, onValue, getDatabase } from 'firebase/database';\r\nimport GenreTags from './Tags.js'; \r\n\r\nfunction BookList() {\r\n  const location = useLocation();\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedGenre, setSelectedGenre] = useState('All');\r\n  const [books, setBooks] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const db = getDatabase();\r\n    const booksRef = ref(db, 'UserData');\r\n  \r\n    const unsubscribe = onValue(booksRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      if (data) {\r\n        const booksArray = Object.values(data).map(book => ({\r\n          ...book,\r\n          title: book.BookTitle, \r\n          genre: book.Genre, \r\n          imgSrc: book.Photo,\r\n          decision: book.Decision,\r\n          altText: `Cover of ${book.BookTitle}`, \r\n        }))\r\n        .slice(0, 30); \r\n\r\n        setBooks(booksArray);\r\n      } else {\r\n        setBooks([]);\r\n      }\r\n    }, (error) => {\r\n      console.error(error);\r\n      setBooks([]);\r\n    });\r\n\r\n    /* we might get points off for the unsubscribe ? since its in the reutun but we will figure that out latersss*/\r\n    return () => unsubscribe();\r\n  }, []);\r\n  \r\n  const handleSearchInputChange = (event) => {\r\n    setSearchQuery(event.target.value);\r\n  };\r\n\r\n  const handleGenreClick = (genre) => {\r\n    setSelectedGenre(genre);\r\n  };\r\n\r\n  const handleResetClick = () => {\r\n    setSelectedGenre('All');\r\n    setSearchQuery('');\r\n  };\r\n\r\n  const filteredBooks = books.filter(book =>\r\n    (selectedGenre === 'All' || book.genre === selectedGenre) &&\r\n    (book.title ? book.title.toLowerCase().includes(searchQuery.toLowerCase()) : false)\r\n  );\r\n\r\n  const isHomePage = location.pathname === '/';\r\n\r\n  if (!isHomePage) {\r\n    return null;\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n      <div className=\"search-container\">\r\n        <div className=\"search-input-container\">\r\n          <input \r\n            type=\"text\" \r\n            placeholder=\"Search by book name...\" \r\n            value={searchQuery} \r\n            onChange={handleSearchInputChange} \r\n          />\r\n          <button>Search</button>\r\n        </div>\r\n      </div>\r\n      <GenreTags onGenreClick={handleGenreClick} onResetClick={handleResetClick} />\r\n      <div className=\"books-listed\">\r\n        {filteredBooks.map((book, index) => ( \r\n          <div key={index} className=\"item\">\r\n             <Link to={`/books/${book.title}`} className=\"book-link\">\r\n             <div className=\"card\">\r\n              <img src={book.imgSrc} alt={book.altText} />\r\n              <h2>{book.title}</h2>\r\n              <div className={`decision-tag ${book.decision.toLowerCase()}`}>\r\n                {book.decision}\r\n              </div>\r\n              {selectedGenre && (\r\n                <div \r\n                  className={`genre-box type-button-${book.genre.toLowerCase()}`} \r\n                >\r\n                  {book.genre}\r\n                </div>\r\n              )}\r\n            </div>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <h2>Find your next read!</h2>\r\n      <div className=\"create\">\r\n        <Link to=\"/quizParent\"><button>Take A Quiz</button></Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}